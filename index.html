<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="icon" type="image/png" href="images/icon.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Re:Pitch</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#fff">
</head>

<body>
    <div class="content">
    <h1>Re:Pitch</h1>
    <div class="divcont">
    <div id="drop_zone" class="drop-zone">
        <p>Choose options then drop an audio file here or click to select a file</p>
        <input type="file" id="fileInput" accept="audio/*" multiple style="display: none;">
    </div>
    <button style="display: none;" id="processButton">Resample Audio</button>
    <a id="downloadLink" style="display: none;">Download </a>
    </div>
    <div class="information items">
      <div class="fidelity">
        <p><b>Fidelity</b></p>
      <div>
          <input type="radio" id="sd" name="fidelity" value="sd" checked />
          <label for="sd">CD (16/46)</label>
        </div>

        <div>
          <input type="radio" id="SP-1200" name="fidelity" value="SP-1200" />
          <label for="SP-1200">SP-1200 8 Bit (8/26)</label>
        </div>
        <div>
          <input type="radio" id="SP-1201" name="fidelity" value="SP-1201" />
          <label for="SP-1201">SP-1200 16 Bit (16/26)</label>
        </div>
        <div>
          <input type="radio" id="SK-1" name="fidelity" value="SK-1" />
          <label for="SK-1">SK-1 (8/9)</label>
        </div>
      </div>
      <div class="speed">
        <p><b>Speed</b></p>
        <div>
          <input type="radio" id="1x" name="speed" value="1x" checked />
          <label for="1x">1x</label>
        </div>
        <div>
          <input type="radio" id="2x" name="speed" value="2x" />
          <label for="2x">2x</label>
        </div>
        <div>
          <input type="radio" id="4x" name="speed" value="4x" />
          <label for="4x">4x</label>
        </div>
      </div>
      <div class="channels">
        <p><b>Channels</b></p>
        <div>
          <input type="radio" id="2" name="channels" value="2" checked/>
          <label for="2">Stereo</label>
        </div>
        <div>
          <input type="radio" id="1" name="channels" value="1"/>
          <label for="1">Mono</label>
        </div>

      </div>
      <div class="filename">
        <p><b>Rename File?</b></p>
        <div>
          <input type="radio" id="1" name="filename" value="true" checked/>
          <label for="1">Rename to BPM and Key</label>
        </div>
        <div>
          <input type="radio" id="2" name="filename" value="false"/>
          <label for="2">Keep Original Filename</label>
        </div>
      </div>
    </div>
    <form id="ko2Form">
      <details class="information" open>
        <summary>
          <b>EP-133 KO II Settings</b>
          <input type="checkbox" role="switch" id="ko2FormToggle" checked style="margin-left: 2em;">
        </summary>

        <fieldset id="ko2FormFieldset" class="items">
          <p class="volume-slider">
            <output class="price-output" for="sound.amplitude"></output>
            <input type="range" orient="vertical" name="sound.amplitude" id="sound.amplitude" value="90" min="0" max="200" list="amplitudelist" />
            <label for="sound.amplitude"><b>Volume</b></label>
            <datalist id="amplitudelist">
              <option value="0">0</option>
              <option value="90">90</option>
              <option value="200">200</option>
            </datalist>
          </p>
          <div class="grid-container">
            <div>
              <label for="sound.pan">
                <b>Pan</b>
                <output class="price-output" for="sound.pan"></output>
              </label>
              <input type="range" name="sound.pan" id="sound.pan" value="0" min="-16" max="16" list="panlist"/>
              <datalist id="panlist">
                <option value="-16">L</option>
                <option value="0">C</option>
                <option value="16">R</option>
              </datalist>
            </div>
            <div>
              <label for="sound.pitch">
                <b>Pitch</b>
                <output class="price-output" for="sound.pitch"></output>
              </label>
              <input type="range" name="sound.pitch" id="sound.pitch" value="0" min="-12" max="12" list="pitchlist" style="margin-bottom: 2em" />
              <datalist id="pitchlist">
                <option value="-12">-12</option>
                <option value="0">0</option>
                <option value="12">12</option>
              </datalist>
            </div>

            <div>
              <label for="envelope.attack">
                <b>Attack</b>
                <output class="price-output" for="envelope.attack"></output>
              </label>
              <input type="range" name="envelope.attack" id="envelope.attack" value="0" min="0" max="255" />
            </div>
            <div>
              <label for="envelope.release">
                <b>Release</b>
                <output class="price-output" for="envelope.release"></output>
              </label>
              <input type="range" name="envelope.release" id="envelope.release" value="128" min="0" max="255" />
            </div>
          </div>

          <div>
            <p><b>Playmode</b></p>
            <div>
              <input type="radio" id="sound.playmode.oneshot" name="sound.playmode" value="oneshot" />
              <label for="sound.playmode.oneshot">Oneshot</label>
            </div>
            <div>
              <input type="radio" id="sound.playmode.key" name="sound.playmode" value="key" checked />
              <label for="sound.playmode.key">Key</label>
            </div>
            <div style="margin-bottom: 1.8em">
              <input type="radio" id="sound.playmode.legato" name="sound.playmode" value="legato" />
              <label for="sound.playmode.legato">Legato</label>
            </div>

            <div>
              <p><label for="sound.rootnote"><b>Rootnote</b></label></p>
              <input type="number" name="sound.rootnote" id="sound.rootnote" value="60" min="0" max="127" />
              <output class="price-output" for="sound.rootnote"></output>
            </div>
          </div>

          <div>
            <p><b>Time Stretch</b></p>
            <div>
              <input type="radio" id="time.mode.off" name="time.mode" value="off" checked/>
              <label for="time.mode.off">Off</label>
            </div>
            <div>
              <input type="radio" id="time.mode.bpm" name="time.mode" value="bpm" />
              <label for="time.mode.bpm">BPM</label>
            </div>
            <div>
              <input type="radio" id="time.mode.bar" name="time.mode" value="bar" />
              <label for="time.mode.bar">Bar</label>
            </div>
          </div>
        </fieldset>

        <p><i>These options set the default playback style when the sample loads in the Teenage Engineering KO II. They are ignored in other samplers.</i></p>
      </details>
    </form>

    <div class="information">
      <div class="section 1">
          <h2>What Is This?</h2>
          <p>A tool that modifies the speed and fidelity of audio files.</p>
      </div>
  
      <div class="section 2">
          <h2>How Do I Use This?</h2>
          <p>1. Choose options <br>
            2. Upload files (max. 30 sec.)<br>
            3. ??? <br>
            4. Make music <br>
          </p>
      </div>
      <div class="section">
          <h2>What Do The Options Mean?</h2>
          <p>Fidelity sets, well, the fidelity of the output. You can choose between CD Quality (46kHz 16 Bit) and approximations of old samplers such as the Emu SP-1200 (26kHz 12 Bit)* or Casio SK-1 (9kHz 8 Bit). Speed sets the speed of the outpu and Channels sets the output channels. <br><br>*Due to lack of 12 Bit support in WAV files there are two options for the SP-1200 simulation.</p>
      </div>
  
      <div class="section 3">
          <h2>Why Does This Exist?</h2>
          <p>Speeding up audio samples is an old trick dating back to the first hardware samplers such as the <a href="https://en.wikipedia.org/wiki/E-mu_SP-1200">Emu SP-1200</a> and <a href="https://de.wikipedia.org/wiki/Akai_MPC_60">Akai MPC 60</a>. It was used to get around memory limitations. These days, it's useful for the <a href="https://www.roland.com/global/products/sp-404mk2/">Roland SP-404</a> or the <a href="https://teenage.engineering/products/ep-133">Teenage Engineering EP-133 KO II.</a> Now you're asking yourself, "Can't I do this with my DAW?" Sure, you could, but this is a drag & drop solution, and no one forces you to use it anyway.</p>
      </div>
      <div class="section">
          <h2>How Does This Work?</h2>
          <p>It only uses the WebAudio API and some fairy dust. Files are processed client-side, which means that your audio does not get sent to any servers. If you want to know more, the source code is on <a href="https://github.com/YYUUGGOO/repitch">GitHub</a>.</p>
      </div>
      <div class="section 5">
          <h2>What Do I Do With The Files?</h2>
          <p>Upload them to your sampler and pitch down accordingly. <br><br>If you are using the KO II, assign the sample to a pad and either pitch it down or play it chromatically one octave down if you chose 2X and two octaves down if you chose 4X.</p>
      </div>
      <div class="section 4">
          <h2>Why Did You Make This?</h2>
          <p>Because I got tired of manually speeding up and resampling samples for my KO II using Ableton.</p>
      </div>
      <div class="section">
          <h2>Who Are You?</h2>
          <p>My name is David, but I go by Palm and Yūgo. I'm an indie artist mainly doing lo-fi but also other kinds of music. If you want to know more, you can check out my website at <a href="https://yuugo.art">yuugo.art</a></p>
      </div>
  </div>
  
    <div class="footer">
        <p>Made by <a href="https://yuugo.art">Yūgo</a> <br> Darkmode by <a href="https://darkmodejs.learn.uno/">Darkroom.js</a></p>
    </div>
</body>

</html>

<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
<script src="script.js"></script>
<script>
  function addDarkmodeWidget() {
    new Darkmode().showWidget();
  }
  window.addEventListener('load', addDarkmodeWidget);
</script>
